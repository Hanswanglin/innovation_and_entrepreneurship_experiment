
{% extends "layout.html" %}
{% block body %}


	
    <script type="text/javascript">
	

	
	function changeinformation(){
		var username=$('#username').val();
		var op=$('#oldpassword').val();
		var np=$('#newpassword').val();
		if(op==""){
			var x=$('#oplabel').html('必须填写原密码！');
			return;
		}
		else{
			var x=$('#oplabel').html('原密码');
		}
		if(np==""){
			var x=$('#nplabel').html('必须填写新密码！');
			return;
		}
		else{
			var x=$('#nplabel').html('新密码');
		}
		var dict1={'username':username,'oldpassword':op,'newpassword':np};
		$.ajax({
			  type: "post",
			  contentType: "application/json; charset=UTF-8",
			  url: "/myinformation",
			  xhrFields: {withCredentials: true},
			  crossDomain: true,
			  dataType: 'json',
			  data:JSON.stringify(dict1),
			  success:function(data){
								 alert(data.status);
								 location.replace(location.href);
								}
								});
	
	}

	</script>

		<h2> 修改个人信息</h2>
		</br>
		
		<div class="container">
			<div class="col-sm-5">
			
			<label for="username">用户名</label>
			<input type=text id="username" name=username class="form-control" value="{{ username }}" readonly="readonly">
			</br>
			<label for="oldassword" id="oplabel">原密码</label>
			<input type=password id="oldpassword" name=oldpassword class="form-control" placeholder="请输入原密码" required>
			</br>
			<label for="newpassword" id="nplabel">新密码</label>
			<input type=password id="newpassword" name=newpassword class="form-control" placeholder="请输入新密码" required>
			</br>
			<button class="btn btn-danger" onclick="changeinformation();" >确认修改</button>
			
			 
			 </div>
		</div>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
        </div>
      </div>
    </div>
  

	

{% endblock %}	
	